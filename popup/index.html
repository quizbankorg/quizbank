<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QuizBank</title>
  <link rel="stylesheet" href="index.css">
</head>

<body>
  <!-- Settings Dropdown (shown only when access is valid) -->
  <div class="dropdown hidden">
    <div class="gear-icon">âš™ï¸</div>
    <div class="dropdown-menu">
      <div class="toggle-option">
        <label class="toggle-label">
          <input type="checkbox" id="logging-toggle">
          <span class="toggle-slider"></span>
          <span class="toggle-text">Enable Logging</span>
        </label>
        <a href="#" id="download-debug" class="debug-link">
          <span class="download-icon">ğŸ“¥</span>
          <span class="debug-text">logs</span>
        </a>
      </div>
      <div class="toggle-option">
        <label class="toggle-label">
          <input type="checkbox" id="stealth-toggle">
          <span class="toggle-slider"></span>
          <span class="toggle-text">Stealth Mode</span>
        </label>
      </div>
    </div>
  </div>

  <!-- Access Gate (shown when no valid access) -->
  <div id="access-gate" class="access-gate hidden">
    <div class="access-header">
      <span class="lock-icon">ğŸ”</span>
      <h2>QuizBank Access</h2>
    </div>
    <p class="access-description">Enter your access code to activate QuizBank</p>

    <div class="voucher-form">
      <input type="text" id="voucher-input" placeholder="Enter access code" maxlength="20" autocomplete="off"
        spellcheck="false">
      <button id="activate-btn" class="activate-btn">
        <span class="btn-text">Activate</span>
        <span class="btn-loading hidden">â³</span>
      </button>
    </div>

    <div id="voucher-error" class="voucher-error hidden"></div>

    <div class="voucher-warning">
      <span class="warning-icon">âš ï¸</span>
      <span>Reinstalling the extension requires re-entering an access code.</span>
    </div>

    <!-- Update Available Button (for non-access users) -->
    <a href="https://quizbankorg.github.io/quizbank/" target="_blank" id="update-btn-gate" class="update-btn hidden">
      <span class="update-icon">ğŸ†•</span>
      <span>New Update Available</span>
    </a>

    <!-- Version Info -->
    <div id="version-gate" class="version-info"></div>
  </div>

  <!-- Main Content (shown when access is valid) -->
  <div id="main-content" class="main-content hidden">

    <header>ğŸ¦ QuizBank Status</header>

    <!-- Access Info Banner -->
    <div id="access-info" class="access-info">
      <span class="access-badge">âœ“ Active</span>
      <span id="access-expires" class="access-expires"></span>
    </div>

    <p>A panel will show up when you are on a quiz page.</p>

    <!-- Update Available Button -->
    <a href="https://quizbankorg.github.io/quizbank/" target="_blank" id="update-btn" class="update-btn hidden">
      <span class="update-icon">ğŸ†•</span>
      <span>New Update Available</span>
    </a>

    <!-- ClipboardAuto Section -->
    <div class="clipboard-auto-section">
      <button class="clipboard-auto-btn" id="clipboard-auto-btn">
        <span class="clipboard-auto-icon">ğŸ“‹</span>
        <span class="clipboard-auto-text">ClipboardAuto</span>
        <span class="clipboard-auto-arrow" id="clipboard-auto-arrow">â–¼</span>
      </button>
      <div class="clipboard-auto-content hidden" id="clipboard-auto-content">
        <p class="qr-instruction">Scan QR to open on mobile:</p>
        <div id="qr-code" class="qr-code-container"></div>
      </div>
    </div>

    <!-- Version Info -->
    <div id="version-main" class="version-info"></div>
  </div>

  <script src="browser-polyfill.min.js"></script>
  <script src="qrcode.min.js"></script>
  <script src="../database/supabase.min.js"></script>
  <script src="index.js"></script>
</body>

</html>